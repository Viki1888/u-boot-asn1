/dts-v1/;
/ {
    model = "T-HEAD ICE soc";
    compatible = "thead,ice_c910";
    #address-cells = <2>;
    #size-cells = <2>;

    memory@0 {
        device_type = "memory";
        reg = <0x0 0x40000000 0x0 0x20000000>;
    };

    cpus {
        #address-cells = <1>;
        #size-cells = <0>;
        timebase-frequency = <6250000>;  /* 1/8 of dummy_apb */
        cpu@0 {
            device_type = "cpu";
            reg = <0>;
            status = "okay";
            compatible = "riscv";
            riscv,isa = "rv64imafdcsu";
            mmu-type = "riscv,sv39";
            cpu0_intc: interrupt-controller {
                #interrupt-cells = <1>;
                compatible = "riscv,cpu-intc";
                interrupt-controller;
            };
        };
        cpu@1 {
            device_type = "cpu";
            reg = <1>;
            status = "fail";
            compatible = "riscv";
            riscv,isa = "rv64imafdcsu";
            mmu-type = "riscv,sv39";
            cpu1_intc: interrupt-controller {
                #interrupt-cells = <1>;
                compatible = "riscv,cpu-intc";
                interrupt-controller;
            };
        };
        cpu@2 {
            device_type = "cpu";
            reg = <2>;
            status = "fail";
            compatible = "riscv";
            riscv,isa = "rv64imafdcsu";
            mmu-type = "riscv,sv39";
            cpu2_intc: interrupt-controller {
                #interrupt-cells = <1>;
                compatible = "riscv,cpu-intc";
                interrupt-controller;
            };
        };
    };

    soc {
        #address-cells = <2>;
        #size-cells = <2>;
        compatible = "simple-bus";
        ranges;

        intc: interrupt-controller@3f0000000 {
            #interrupt-cells = <1>;
            compatible = "riscv,plic0";
            interrupt-controller;
            interrupts-extended = <
                &cpu0_intc  0xffffffff &cpu0_intc  9
                &cpu1_intc  0xffffffff &cpu1_intc  9
                &cpu2_intc  0xffffffff &cpu2_intc  9
                >;
            reg = <0x3 0xf0000000 0x0 0x04000000>;
            reg-names = "control";
            riscv,max-priority = <7>;
            riscv,ndev = <80>;
        };

        dummy_apb: apb-clock {
            compatible = "fixed-clock";
            clock-frequency = <50000000>;
            clock-output-names = "dummy_apb";
            #clock-cells = <0>;
        };

        serial@3fff73000 {
            compatible = "snps,dw-apb-uart";
            reg = <0x3 0xfff73000 0x0 0x400>;
            interrupt-parent = <&intc>;
            interrupts = <23>;
            clocks = <&dummy_apb>;
            clock-frequency = <50000000>;
            clock-names = "baudclk";
            reg-shift = <2>;
            reg-io-width = <4>;
        };

        pmu: pmu {
            compatible = "riscv,c910_pmu";
        };

        mmc: mmc0@3fffb0000 {
            compatible = "snps,dw-mshc";
            reg = <0x3 0xfffb0000 0x0 0x400>;
            bus-width = <8>;
            fifo-depth = <256>;
            clocks = <&dummy_apb>, <&dummy_apb>;
            clock-names = "biu", "ciu";
            max-frequency = <25000000>;
        };

        gmac: ethernet@3fffc0000 {
            compatible = "snps,arc-dwmac-3.70a";
            reg = <0x3 0xfffc0000 0x0 0x2000>;
            interrupt-parent = <&intc>;
            interrupts = <40>;
            interrupt-names = "macirq";
            clocks = <&dummy_apb>;
            clock-names = "stmmaceth";
            snps,pbl = <32>;
            snps,fixed-burst;

            phy-mode = "mii";
            phy-handle = <&phy_88E1111>;
            max-speed = <100>;
            mdio0 {
                #address-cells = <1>;
                #size-cells = <0>;
                compatible = "snps,dwmac-mdio";

                phy_88E1111: ethernet-phy@0 {
                    reg = <0x0 0x0>;
                };
            };
        };
    };

    chosen {
        bootargs = "console=ttyS0,115200";
        linux,initrd-start = <0x1000000>;
        linux,initrd-end = <0x17000000>;
        stdout-path = "/soc/serial@3fff73000:115200";
    };
};
